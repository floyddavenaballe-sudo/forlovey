<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentines?üíå</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff4d6d;
            --env-back: #f06292;
            --env-front: #f48fb1;
            --env-flap: #d81b60;
            --paper: #ffffff;

            
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #fce4ec 0%, #ffc1e3 100%);
            font-family: 'Poppins', sans-serif;
            overflow: hidden; display: flex; justify-content: center; align-items: center;
        }

        /* --- ACT 1: THE PERSUASION --- */
        #act1 { 
            text-align: center; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; width: 100%; height: 100%;
        }

        h1 { 
            color: var(--primary); font-family: 'Dancing Script', cursive; font-size: clamp(2.2rem, 8vw, 3.8rem); 
            margin-bottom: 50px; z-index: 9999; position: relative; 
            background: rgba(255, 255, 255, 0.5); padding: 15px 30px; border-radius: 25px; backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); pointer-events: none;
        }

        .btn-wrapper { 
            display: flex; gap: 40px; align-items: center; justify-content: center; 
            height: 100px; width: 100%; position: relative; 
        }

        #yesBtn, #noBtn {
            padding: 18px 45px; font-size: 1.3rem; font-weight: 600; border: none; 
            border-radius: 50px; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            white-space: nowrap; 
        }

        #yesBtn { 
            background: var(--primary); color: white; z-index: 10;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        #noBtn { 
            background: white; color: #666; z-index: 9500; 
            position: relative; /* Fixed in JS after first move */
            transition: all 0.2s ease-out;
        }

        /* --- ACT 2: THE MAZE --- */
        #act2 { display: none; text-align: center; z-index: 20; }
        #maze-container {
            width: 350px; height: 350px; background: rgba(255,255,255,0.8);
            border: 6px solid white; border-radius: 30px; position: relative; 
            margin: 20px auto; overflow: hidden; cursor: none;
        }
        .maze-wall { background: var(--env-front); position: absolute; border-radius: 10px; }
        #maze-pointer { position: absolute; font-size: 32px; z-index: 100; pointer-events: none; animation: heartPulse 0.8s infinite alternate; }
        @keyframes heartPulse { from { transform: scale(1); } to { transform: scale(1.3); } }
        #maze-end { position: absolute; bottom: 10px; right: 10px; font-size: 35px; }

        /* --- ACT 3: THE ENVELOPE (MAUI REBUILT) --- */
        #act3 { display: none; text-align: center; z-index: 30; }
        .envelope-main {
            position: relative; width: 380px; height: 240px; 
            background: var(--env-back); border-radius: 0 0 15px 15px;
            margin: 0 auto; box-shadow: 0 20px 50px rgba(0,0,0,0.15); cursor: pointer;
        }
        .pocket {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 170px;
            background: var(--env-front); border-radius: 0 0 15px 15px; z-index: 10;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 30%, 50% 0%, 100% 30%, 100% 100%, 0 100%);
        }
        .flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 190px solid transparent; border-right: 190px solid transparent;
            border-top: 130px solid var(--env-flap);
            transform-origin: top; transition: transform 0.6s ease; z-index: 20;
        }
        .letter {
            position: absolute; bottom: 10px; left: 20px; width: 340px; height: 210px;
            background: white; padding: 25px; box-sizing: border-box; border-radius: 10px;
            z-index: 5; transition: transform 0.8s ease 0.4s; text-align: center;
        }
        .envelope-main.open .flap { transform: rotateX(180deg); z-index: 0; }
        .envelope-main.open .letter { transform: translateY(-160px); z-index: 15; }

        .sad-emoji { position: fixed; font-size: 3.5rem; animation: floatUp 1s forwards; z-index: 10000; }
        @keyframes floatUp { to { transform: translateY(-150px); opacity: 0; } }
    </style>
</head>
<body>

    <div id="act1">
        <h1 id="title">Will you be my Valentines?</h1>
        <div class="btn-wrapper">
            <button id="yesBtn" onclick="startMaze()">YES!</button>
            <button id="noBtn" onmouseover="runAway()" onclick="runAway()">No</button>
        </div>
    </div>

    <div id="act2">
        <h1 style="background:none; backdrop-filter:none;">YAYYYYYYYYYYYYYY! but before that please play this simple game hehe üòÅ</h1>
        <div id="maze-container" onmousemove="handleMaze(event)">
            <div class="maze-wall" style="top:50px; left:0; width:240px; height:30px;"></div>
            <div class="maze-wall" style="top:140px; left:100px; width:240px; height:30px;"></div>
            <div class="maze-wall" style="top:230px; left:0; width:240px; height:30px;"></div>
            <div id="maze-pointer">‚ù§Ô∏è</div>
            <div id="maze-end">üéÅ</div>
        </div>
    </div>

    <div id="act3">
        <div class="envelope-main" id="env" onclick="this.classList.toggle('open')">
            <div class="flap"></div>
            <div class="pocket"></div>
            <div class="letter">
                <h2 style="font-family:'Dancing Script'; color:var(--primary); margin:0; font-size: 1.8rem;">Hello, Bebi!</h2>
                <p style="font-size: 0.95rem; color: #444; margin-top: 10px;">Sabi ko na papayag ka rin ih ehehe, love love kita! Thank you for saying yes, I ‚ù§Ô∏è U</p>
                <p style="font-weight:bold; color: var(--primary);">Advance Happy Valentine's Day, Bebi!!!!!!</p>
            </div>
        </div>
        <h2 style="color:var(--primary); font-family:'Dancing Script'; margin-top:170px; font-size:2.5rem;">Click to open your mail!</h2>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const title = document.getElementById('title');
        let scale = 1;
        let chaseStarted = false;

        // List of texts for the No button
        const noPhrases = [
            "Sure ka na ba diyan?",
            "Di nga ayaw talaga?!",
            "Pookie please?",
            "Ayaw talaga??",
            "Aray mo :(",
            "Sakit mo, sah...",
            "Wag mo sirain puso ko plz",
            "Last chance, pag ako umiyak üò¢",
            "Yan na yung yes button oh ang laki ",
            "Wrong way to, alis!",
            "Sige iyak na ako"
        ];
        let phraseIndex = 0;

        // --- ACT 1: RUNAWAY & TEXT CHANGE ---
        function runAway() {
            if(!chaseStarted) {
                noBtn.style.position = 'fixed';
                chaseStarted = true;
            }

            // Change button text
            noBtn.innerText = noPhrases[phraseIndex];
            phraseIndex = (phraseIndex + 1) % noPhrases.length;

            const yesRect = yesBtn.getBoundingClientRect();
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            const padding = 60;

            let x, y;
            let overlapping = true;
            let attempts = 0;

            // Strict Anti-Overlap Radar
            while (overlapping && attempts < 100) {
                x = Math.max(padding, Math.floor(Math.random() * (window.innerWidth - btnWidth - padding)));
                y = Math.max(padding, Math.floor(Math.random() * (window.innerHeight - btnHeight - padding)));
                
                const overlapX = x + btnWidth > yesRect.left - 30 && x < yesRect.right + 30;
                const overlapY = y + btnHeight > yesRect.top - 30 && y < yesRect.bottom + 30;

                if (!(overlapX && overlapY)) {
                    overlapping = false;
                }
                attempts++;
            }

            noBtn.style.left = x + 'px'; 
            noBtn.style.top = y + 'px';
            
            scale += 1.8;
            yesBtn.style.transform = `scale(${scale})`;

            spawnEmoji(x, y);
        }

        function spawnEmoji(x, y) {
            const e = document.createElement('div');
            e.className = 'sad-emoji'; e.innerText = 'üò≠';
            e.style.left = x + 'px'; e.style.top = y + 'px';
            document.body.appendChild(e);
            setTimeout(() => e.remove(), 1000);
        }

        // --- ACT 2: MAZE ---
        function startMaze() {
            document.getElementById('act1').style.display = 'none';
            noBtn.style.display = 'none';
            document.getElementById('act2').style.display = 'block';
        }

        function handleMaze(e) {
            const maze = document.getElementById('maze-container');
            const pointer = document.getElementById('maze-pointer');
            const rect = maze.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            pointer.style.left = (x - 16) + 'px';
            pointer.style.top = (y - 16) + 'px';

            const walls = document.getElementsByClassName('maze-wall');
            for (let wall of walls) {
                const wRect = wall.getBoundingClientRect();
                if (e.clientX >= wRect.left && e.clientX <= wRect.right && e.clientY >= wRect.top && e.clientY <= wRect.bottom) {
                    pointer.style.left = '10px'; pointer.style.top = '10px';
                    return;
                }
            }
            if (x > 300 && y > 300) {
                document.getElementById('act2').style.display = 'none';
                document.getElementById('act3').style.display = 'block';
                rainHearts();
            }
        }

        function rainHearts() {
            setInterval(() => {
                const h = document.createElement('div');
                h.innerText = '‚ù§Ô∏è'; h.style.position = 'fixed';
                h.style.left = Math.random()*100+'vw'; h.style.top = '-50px';
                h.style.fontSize = Math.random()*20+20+'px';
                h.style.transition = `transform ${Math.random()*2+3}s linear`;
                document.body.appendChild(h);
                setTimeout(() => { h.style.transform = `translateY(${window.innerHeight+100}px) rotate(360deg)`; }, 50);
                setTimeout(() => h.remove(), 5000);
            }, 300);
        }
    </script>
</body>

</html>
